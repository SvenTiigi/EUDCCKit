<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" />
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/EUCentralEUDCCTrustService.html">EUCentralEUDCCTrustService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RobertKochInstituteEUDCCTrustService.html">RobertKochInstituteEUDCCTrustService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RobertKochInstituteEUDCCTrustService/Failure.html">‚Äì Failure</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/EUDCCTrustService.html">EUDCCTrustService</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/EUDCC.html">EUDCC</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC.html#/s:5EUDCCAAV19EncoderUserInfoKeysO">‚Äì EncoderUserInfoKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Content.html">‚Äì Content</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Country.html">‚Äì Country</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/CryptographicSignature.html">‚Äì CryptographicSignature</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/DiseaseAgentTargeted.html">‚Äì DiseaseAgentTargeted</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Name.html">‚Äì Name</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Recovery.html">‚Äì Recovery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Test.html">‚Äì Test</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/Vaccination.html">‚Äì Vaccination</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/SignedPayload.html">‚Äì SignedPayload</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/TrustCertificate.html">‚Äì TrustCertificate</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/VerificationCandidate.html">‚Äì VerificationCandidate</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCC/ValidationRule.html">‚Äì ValidationRule</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCDecoder.html">EUDCCDecoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCDecoder/DecodingError.html">‚Äì DecodingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCDecoder/CBORProcessingError.html">‚Äì CBORProcessingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCValidator.html">EUDCCValidator</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCValidator/Failure.html">‚Äì Failure</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCVerifier.html">EUDCCVerifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCVerifier/VerificationResult.html">‚Äì VerificationResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EUDCCVerifier/Failure.html">‚Äì Failure</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><br/></p>

<p align="center">
    <img src="https://raw.githubusercontent.com/SvenTiigi/EUDCCKit/gh-pages/readme-assets/logo.png" width="30%" alt="logo">
</p>

<h1 align="center">EU Digital COVID Certificate Kit</h1>

<p align="center">
    A Swift Package to decode, verify and validate EU Digital COVID Certificates<br/>for iOS, tvOS, watchOS and macOS
</p>

<p align="center">
   <a href="https://developer.apple.com/swift/">
      <img src="https://img.shields.io/badge/Swift-5.4-orange.svg?style=flat" alt="Swift 5.4">
   </a>
   <a href="https://twitter.com/SvenTiigi/">
      <img src="https://img.shields.io/badge/Twitter-@SvenTiigi-blue.svg?style=flat" alt="Twitter">
   </a>
</p>
<h2 id='disclaimer' class='heading'>Disclaimer</h2>

<blockquote>
<p>The EUDCCKit is not an offical implementation of the EU Digital COVID Certificate</p>
</blockquote>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>[x] Easily decode an EU Digital COVID Certificate üßæ</li>
<li>[x] Verify cryptographic signature üîê</li>
<li>[x] Certificate validation ‚úÖ</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>To integrate using Apple&rsquo;s <a href="https://swift.org/package-manager/">Swift Package Manager</a>, add the following as a dependency to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/SvenTiigi/EUDCCKit.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.0.1"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>

<p>Or navigate to your Xcode project then select <code>Swift Packages</code>, click the ‚Äú+‚Äù icon and search for <code>EUDCCKit</code>.</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>The <code>EUDCCKit</code> Swift Package is made of four distinct libraries to decode, verify and validate an EU Digital COVID Certificate.</p>
<h3 id='eudcc' class='heading'>EUDCC</h3>

<p>The <code><a href="Structs/EUDCC.html">EUDCC</a></code> library contains the model definition of the EU Digital COVID Certificate</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>

<span class="c1">// The EU Digital COVID Certificate model</span>
<span class="k">let</span> <span class="nv">eudcc</span><span class="p">:</span> <span class="kt">EUDCC</span>

<span class="c1">// Access content of EUDCC</span>
<span class="k">switch</span> <span class="n">eudcc</span><span class="o">.</span><span class="n">content</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">vaccination</span><span class="p">(</span><span class="k">let</span> <span class="nv">vaccination</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Vaccination"</span><span class="p">,</span> <span class="n">vaccination</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">test</span><span class="p">(</span><span class="k">let</span> <span class="nv">test</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Test"</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">recovery</span><span class="p">(</span><span class="k">let</span> <span class="nv">recovery</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Recovery"</span><span class="p">,</span> <span class="n">recovery</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>Head over to the <a href="https://github.com/SvenTiigi/EUDCCKit#eudcc-1">advanced section</a> to learn more.</p>
</blockquote>
<h3 id='euddcdecoder' class='heading'>EUDDCDecoder</h3>

<p>The <code><a href="Structs/EUDCCDecoder.html">EUDCCDecoder</a></code> library provides an <code><a href="Structs/EUDCCDecoder.html">EUDCCDecoder</a></code> object which is capabale of decoding a Base-45 string reperesentation of the EU Digital COVID Certificate which is mostly embedded in a QR-Code.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCCDecoder</span>

<span class="c1">// Initialize an EUDCCDecoder</span>
<span class="k">let</span> <span class="nv">decoder</span> <span class="o">=</span> <span class="kt">EUDCCDecoder</span><span class="p">()</span>

<span class="c1">// The Base-45 encoded EU Digital COVID Certificate from a QR-Code</span>
<span class="k">let</span> <span class="nv">qrCodeContent</span> <span class="o">=</span> <span class="s">"HC1:..."</span>

<span class="c1">// Decode EUDCC from QR-Code</span>
<span class="k">let</span> <span class="nv">decodingResult</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">qrCodeContent</span><span class="p">)</span>

<span class="c1">// Switch on decoding result</span>
<span class="k">switch</span> <span class="n">decodingResult</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">eudcc</span><span class="p">):</span>
    <span class="c1">// Successfully decoded Digital COVID Certificate</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"EU Digital COVID Certificate"</span><span class="p">,</span> <span class="n">eudcc</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">decodingError</span><span class="p">):</span>
    <span class="c1">// Decoding failed with error</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Failed to decode EUDCC"</span><span class="p">,</span> <span class="n">decodingError</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>Head over to the <a href="https://github.com/SvenTiigi/EUDCCKit#euddcdecoder-1">advanced section</a> to learn more.</p>
</blockquote>
<h3 id='eudccverifier' class='heading'>EUDCCVerifier</h3>

<p>The <code><a href="Structs/EUDCCVerifier.html">EUDCCVerifier</a></code> library provides an <code><a href="Structs/EUDCCVerifier.html">EUDCCVerifier</a></code> object which can be used to verify the cryptographic signature of the EU Digital COVID Certificate.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCCVerifier</span>

<span class="c1">// Initialize an EUDDCCVerifier</span>
<span class="k">let</span> <span class="nv">verifier</span> <span class="o">=</span> <span class="kt">EUDCCVerifier</span><span class="p">(</span>
    <span class="nv">trustService</span><span class="p">:</span> <span class="kt">EUCentralEUDCCTrustService</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1">// Verify EU Digital COVID Certificate</span>
<span class="n">verifier</span><span class="o">.</span><span class="nf">verify</span><span class="p">(</span><span class="nv">eudcc</span><span class="p">:</span> <span class="n">eudcc</span><span class="p">)</span> <span class="p">{</span> <span class="n">verificationResult</span> <span class="k">in</span>
    <span class="c1">// Switch on verification result</span>
    <span class="k">switch</span> <span class="n">verificationResult</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">trustCertificate</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Cryptographically valid"</span><span class="p">,</span> <span class="n">trustCertificate</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">invald</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Invalid EUDCC"</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Error occured during verification"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>Head over to the <a href="https://github.com/SvenTiigi/EUDCCKit#eudccverifier-1">advanced section</a> to learn more.</p>
</blockquote>
<h3 id='eudccvalidator' class='heading'>EUDCCValidator</h3>

<p>The <code><a href="Structs/EUDCCValidator.html">EUDCCValidator</a></code> library provides an <code><a href="Structs/EUDCCValidator.html">EUDCCValidator</a></code> object which can be used to validate the EU Digital COVID Certifiate based on given rules.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCCValidator</span>

<span class="c1">// Initialize an EUDCCValidator</span>
<span class="k">let</span> <span class="nv">validator</span> <span class="o">=</span> <span class="kt">EUDCCValidator</span><span class="p">()</span>

<span class="c1">// Validate EU Digital COVID Certificate</span>
<span class="k">let</span> <span class="nv">validationResult</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span>
    <span class="nv">eudcc</span><span class="p">:</span> <span class="n">eudcc</span><span class="p">,</span>
    <span class="nv">rule</span><span class="p">:</span> <span class="o">.</span><span class="nf">isFullyImmunized</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!.</span><span class="nf">isVaccinationExpired</span><span class="p">()</span>
<span class="p">)</span>

<span class="c1">// Switch on validation result</span>
<span class="k">switch</span> <span class="n">validationResult</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">success</span><span class="p">:</span>
    <span class="c1">// Successfully validated EU Digital COVID Certificate</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Successfully validated"</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">validationError</span><span class="p">):</span>
    <span class="c1">// Validation failure</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Validation failed"</span><span class="p">,</span> <span class="n">validationError</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>Head over to the <a href="https://github.com/SvenTiigi/EUDCCKit#eudccvalidator-1">advanced section</a> to learn more.</p>
</blockquote>
<h2 id='advanced' class='heading'>Advanced</h2>
<h3 id='eudcc' class='heading'>EUDCC</h3>
<h4 id='content' class='heading'>Content</h4>

<p>Beside the <code>content</code> property of an <code><a href="Structs/EUDCC.html">EUDCC</a></code> you can make use of the following convenience properties to check if the <code><a href="Structs/EUDCC.html">EUDCC</a></code> contains a vaccination, test or recovery object.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>

<span class="c1">// Vaccination</span>
<span class="k">let</span> <span class="nv">vaccination</span><span class="p">:</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">Vaccination</span><span class="p">?</span> <span class="o">=</span> <span class="n">eudcc</span><span class="o">.</span><span class="n">vaccination</span>

<span class="c1">// Test</span>
<span class="k">let</span> <span class="nv">test</span><span class="p">:</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">Test</span><span class="p">?</span> <span class="o">=</span> <span class="n">eudcc</span><span class="o">.</span><span class="n">test</span>

<span class="c1">// Recovery</span>
<span class="k">let</span> <span class="nv">recovery</span><span class="p">:</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">Recovery</span><span class="p">?</span> <span class="o">=</span> <span class="n">eudcc</span><span class="o">.</span><span class="n">recovery</span>
</code></pre>
<h4 id='well-known-value' class='heading'>Well-Known-Value</h4>

<p>Each of the following objects are exposing a <code>WellKnownValue</code> enumeration which can be used to retrieve more detailed information about a certain value:</p>

<ul>
<li><code><a href="Structs/EUDCC/DiseaseAgentTargeted.html">EUDCC.DiseaseAgentTargeted</a></code></li>
<li><code><a href="Structs/EUDCC/Test/TestResult.html">EUDCC.Test.TestResult</a></code></li>
<li><code><a href="Structs/EUDCC/Test/TestType.html">EUDCC.Test.TestType</a></code></li>
<li><code><a href="Structs/EUDCC/Vaccination/VaccineMarketingAuthorizationHolder.html">EUDCC.Vaccination.VaccineMarketingAuthorizationHolder</a></code></li>
<li><code><a href="Structs/EUDCC/Vaccination/VaccineMedicinalProduct.html">EUDCC.Vaccination.VaccineMedicinalProduct</a></code></li>
<li><code><a href="Structs/EUDCC/Vaccination/VaccineOrProphylaxis.html">EUDCC.Vaccination.VaccineOrProphylaxis</a></code></li>
</ul>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>

<span class="k">let</span> <span class="nv">vaccineMedicinalProduct</span><span class="p">:</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">Vaccination</span><span class="o">.</span><span class="kt">VaccineMedicinalProduct</span>

<span class="c1">// Switch on WellKnownValue of VaccineMedicinalProduct</span>
<span class="k">switch</span> <span class="n">vaccineMedicinalProduct</span><span class="o">.</span><span class="n">wellKnownValue</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">covid19VaccineModerna</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">vaxzevria</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="k">break</span>
<span class="p">}</span>
</code></pre>
<h4 id='encoding' class='heading'>Encoding</h4>

<p>The <code><a href="Structs/EUDCC.html">EUDCC</a></code> contains two properties <code>cryptographicSignature</code> and <code>base45Representation</code> which are convenience objects that are not an offical part of the EU Digital COVID Certificate JSON Schema. </p>

<p>If you wish to skip those properties when encoding an <code><a href="Structs/EUDCC.html">EUDCC</a></code> you can set the following <code>userInfo</code> configuration to a <code>JSONEncoder</code>.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>

<span class="k">let</span> <span class="nv">encoder</span> <span class="o">=</span> <span class="kt">JSONEncoder</span><span class="p">()</span>

<span class="n">encoder</span><span class="o">.</span><span class="n">userInfo</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">// Skip encoding CryptographicSignature</span>
    <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">EncoderUserInfoKeys</span><span class="o">.</span><span class="nv">skipCryptographicSignature</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// Skip encoding Base-45 representation</span>
    <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">EncoderUserInfoKeys</span><span class="o">.</span><span class="nv">skipBase45Representation</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">jsonData</span> <span class="o">=</span> <span class="k">try</span> <span class="n">encoder</span><span class="o">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">eudcc</span><span class="p">)</span>
</code></pre>
<h3 id='euddcdecoder' class='heading'>EUDDCDecoder</h3>
<h4 id='decoding' class='heading'>Decoding</h4>

<p>The <code><a href="Structs/EUDCCDecoder.html">EUDCCDecoder</a></code> supports decoding a Base-45 encoded <code>String</code> and <code>Data</code> object.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCCDecoder</span>

<span class="k">let</span> <span class="nv">eudccDecoder</span> <span class="o">=</span> <span class="kt">EUDCCDecoder</span><span class="p">()</span>

<span class="c1">// Decode from Base-45 encoded String</span>
<span class="k">let</span> <span class="nv">eudccBase45EncodedString</span><span class="p">:</span> <span class="kt">String</span>
<span class="k">let</span> <span class="nv">stringDecodingResult</span> <span class="o">=</span> <span class="n">eudccDecoder</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span>
    <span class="nv">from</span><span class="p">:</span> <span class="n">eudccBase45EncodedString</span>
<span class="p">)</span>

<span class="c1">// Decode from Base-45 encoded Data</span>
<span class="k">let</span> <span class="nv">eudccBase45EncodedData</span><span class="p">:</span> <span class="kt">Data</span>
<span class="k">let</span> <span class="nv">dataDecodingResult</span> <span class="o">=</span> <span class="n">eudccDecoder</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span>
    <span class="nv">from</span><span class="p">:</span> <span class="n">eudccBase45EncodedData</span>
<span class="p">)</span>
</code></pre>
<h4 id='convenience-decoding' class='heading'>Convenience decoding</h4>

<p>By importing the <code><a href="Structs/EUDCCDecoder.html">EUDCCDecoder</a></code> library the <code><a href="Structs/EUDCC.html">EUDCC</a></code> object will be extended with a static <code>decode</code> function.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCCDecoder</span>

<span class="k">let</span> <span class="nv">decodingResult</span> <span class="o">=</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="s">"HC1:..."</span><span class="p">)</span>
</code></pre>
<h3 id='eudccverifier' class='heading'>EUDCCVerifier</h3>
<h4 id='eudcctrustservice' class='heading'>EUDCCTrustService</h4>

<p>In order to verify an <code><a href="Structs/EUDCC.html">EUDCC</a></code> the <code><a href="Structs/EUDCCVerifier.html">EUDCCVerifier</a></code> needs to be instantiated with an instance of an <code><a href="Protocols/EUDCCTrustService.html">EUDCCTrustService</a></code> which is used to retrieve the trust certificates.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCVerifier</span>

<span class="kd">struct</span> <span class="kt">SpecificEUDCCTrustService</span><span class="p">:</span> <span class="kt">EUDCCTrustService</span> <span class="p">{</span>

    <span class="c1">/// Retrieve EUDCC TrustCertificates</span>
    <span class="c1">/// - Parameter completion: The completion closure</span>
    <span class="kd">func</span> <span class="nf">getTrustCertificates</span><span class="p">(</span>
        <span class="nv">completion</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Result</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">EUDCC</span><span class="o">.</span><span class="kt">TrustCertificate</span><span class="p">],</span> <span class="kt">Error</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// TODO: Retrieve TrustCertificates and invoke completion handler</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="k">let</span> <span class="nv">eudccVerifier</span> <span class="o">=</span> <span class="kt">EUDCCVerifier</span><span class="p">(</span>
    <span class="nv">trustService</span><span class="p">:</span> <span class="kt">SpecificEUDCCTrustService</span><span class="p">()</span>
<span class="p">)</span>
</code></pre>

<p>The <code>EUDCCKit</code> comes along with two pre defined <code><a href="Protocols/EUDCCTrustService.html">EUDCCTrustService</a></code> implementations:</p>

<ul>
<li><code><a href="Classes/EUCentralEUDCCTrustService.html">EUCentralEUDCCTrustService</a></code></li>
<li><code><a href="Classes/RobertKochInstituteEUDCCTrustService.html">RobertKochInstituteEUDCCTrustService</a></code></li>
</ul>
<h4 id='convenience-verification' class='heading'>Convenience verification</h4>

<p>By importing the <code><a href="Structs/EUDCCVerifier.html">EUDCCVerifier</a></code> library the <code><a href="Structs/EUDCC.html">EUDCC</a></code> object will be extended with a <code>verify</code> function.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCVerifier</span>

<span class="k">let</span> <span class="nv">eudcc</span><span class="p">:</span> <span class="kt">EUDCC</span>

<span class="n">eudcc</span><span class="o">.</span><span class="nf">verify</span><span class="p">(</span>
    <span class="nv">using</span><span class="p">:</span> <span class="kt">EUDCCVerifier</span><span class="p">(</span>
        <span class="nv">trustService</span><span class="p">:</span> <span class="kt">EUCentralEUDCCTrustService</span><span class="p">()</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="p">{</span> <span class="n">verificationResult</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">verificationResult</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">trustCertificate</span><span class="p">):</span>
        <span class="k">break</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">invald</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="k">break</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='eudccvalidator' class='heading'>EUDCCValidator</h3>
<h4 id='validationrule' class='heading'>ValidationRule</h4>

<p>An <code><a href="Structs/EUDCC.html">EUDCC</a></code> can be validated by using an <code><a href="Structs/EUDCCValidator.html">EUDCCValidator</a></code> and a given <code><a href="Structs/EUDCC/ValidationRule.html">EUDCC.ValidationRule</a></code>. An <code><a href="Structs/EUDCC/ValidationRule.html">EUDCC.ValidationRule</a></code> can be initialized with a simple closure wich takes in an <code><a href="Structs/EUDCC.html">EUDCC</a></code> and returns a <code>Bool</code> whether the validation succeed or failed.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCValidator</span>

<span class="c1">// Simple EUDCC ValidationRule instantiation</span>
<span class="k">let</span> <span class="nv">validationRule</span> <span class="o">=</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">ValidationRule</span> <span class="p">{</span> <span class="n">eudcc</span> <span class="k">in</span>
    <span class="c1">// Process EUDCC and return Bool result</span>
<span class="p">}</span>

<span class="c1">// EUDCC ValidationRule with Tag in order to uniquely identify a ValidationRule</span>
<span class="k">let</span> <span class="nv">isVaccinationComplete</span> <span class="o">=</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">ValidationRule</span><span class="p">(</span>
    <span class="nv">tag</span><span class="p">:</span> <span class="s">"is-vaccination-complete"</span>
<span class="p">)</span> <span class="p">{</span> <span class="n">eudcc</span> <span class="k">in</span>
    <span class="n">eudcc</span><span class="o">.</span><span class="n">vaccination</span><span class="p">?</span><span class="o">.</span><span class="n">doseNumber</span> <span class="o">==</span> <span class="n">eudcc</span><span class="o">.</span><span class="n">vaccination</span><span class="p">?</span><span class="o">.</span><span class="n">totalSeriesOfDoses</span>
<span class="p">}</span>
</code></pre>

<p>The <code>EUDCCKit</code> comes along with many pre defined <code><a href="Structs/EUDCC/ValidationRule.html">EUDCC.ValidationRule</a></code> like the following ones.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCValidator</span>

<span class="k">let</span> <span class="nv">eudcc</span><span class="p">:</span> <span class="kt">EUDCC</span>
<span class="k">let</span> <span class="nv">validator</span> <span class="o">=</span> <span class="kt">EUDCCValidator</span><span class="p">()</span>

<span class="c1">// Is fully immunized</span>
<span class="n">validator</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span>
    <span class="nv">eudcc</span><span class="p">:</span> <span class="n">eudcc</span><span class="p">,</span> 
    <span class="nv">rule</span><span class="p">:</span> <span class="o">.</span><span class="nf">isFullyImmunized</span><span class="p">(</span><span class="nv">minimumDaysPast</span><span class="p">:</span> <span class="mi">15</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1">// Is tested positive</span>
<span class="n">validator</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span>
    <span class="nv">eudcc</span><span class="p">:</span> <span class="n">eudcc</span><span class="p">,</span> 
    <span class="nv">rule</span><span class="p">:</span> <span class="o">.</span><span class="n">isTestedPositive</span>
<span class="p">)</span>
</code></pre>
<h4 id='logical-conditional-operators' class='heading'>Logical/Conditional operators</h4>

<p>In order to create more complex rules each <code><a href="Structs/EUDCC/ValidationRule.html">EUDCC.ValidationRule</a></code> can be chained together by applying standard operators.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCValidator</span>

<span class="k">let</span> <span class="nv">defaultValidationRule</span><span class="p">:</span> <span class="kt">EUDCC</span><span class="o">.</span><span class="kt">ValidationRule</span> <span class="o">=</span> <span class="o">.</span><span class="k">if</span><span class="p">(</span>
    <span class="o">.</span><span class="n">isVaccination</span><span class="p">,</span>
    <span class="nv">then</span><span class="p">:</span> <span class="o">.</span><span class="nf">isFullyImmunized</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">.</span><span class="n">isWellKnownVaccineMedicinalProduct</span> <span class="o">&amp;&amp;</span> <span class="o">!.</span><span class="nf">isVaccinationExpired</span><span class="p">(),</span>
    <span class="nv">else</span><span class="p">:</span> <span class="o">.</span><span class="k">if</span><span class="p">(</span>
        <span class="o">.</span><span class="n">isTest</span><span class="p">,</span>
        <span class="nv">then</span><span class="p">:</span> <span class="o">.</span><span class="n">isTestedNegative</span> <span class="o">&amp;&amp;</span> <span class="o">.</span><span class="nf">isTestValid</span><span class="p">(),</span>
        <span class="nv">else</span><span class="p">:</span> <span class="o">.</span><span class="k">if</span><span class="p">(</span>
            <span class="o">.</span><span class="n">isRecovery</span><span class="p">,</span>
            <span class="nv">then</span><span class="p">:</span> <span class="o">.</span><span class="n">isRecoveryValid</span><span class="p">,</span>
            <span class="nv">else</span><span class="p">:</span> <span class="o">.</span><span class="nf">constant</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre>
<h4 id='convenience-validation' class='heading'>Convenience validation</h4>

<p>By importing the <code><a href="Structs/EUDCCValidator.html">EUDCCValidator</a></code> library the <code><a href="Structs/EUDCC.html">EUDCC</a></code> object will be extended with a <code>validate</code> function.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">EUDCC</span>
<span class="kd">import</span> <span class="kt">EUDCCValidator</span>

<span class="k">let</span> <span class="nv">eudcc</span><span class="p">:</span> <span class="kt">EUDCC</span>

<span class="k">let</span> <span class="nv">validationRule</span> <span class="o">=</span> <span class="n">eudcc</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span>
    <span class="nv">rule</span><span class="p">:</span> <span class="o">.</span><span class="n">isWellKnownVaccineMedicinalProduct</span>
<span class="p">)</span>
</code></pre>
<h2 id='license' class='heading'>License</h2>
<pre class="highlight plaintext"><code>EUDCCKit
Copyright (c) 2021 Sven Tiigi sven.tiigi@gmail.com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2021-07-15)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ‚ô™‚ô´ v0.13.7</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
